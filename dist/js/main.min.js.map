{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","scrollSpeed","init","_this","this","mapElement","document","getElementById","$window","$","window","getWindowSize","setIsMobileWidth","Router","resize","onResize","Nav","ready","Shapes","Minimap","Coordinates","Map","Fades","Orientation","width","innerWidth","height","innerHeight","center","x","y","isMobileWidth","fixWidows","each","string","html","replace","$header","setScrollOffset","bind","on","toggleClass","reset","target","data","$target","removeClass","stop","animate","scrollTop","offset","top","scrollOffset","outerHeight","moveMap","resetContent","cleanUrl","location","hash","loadRoute","parseHash","addClass","setMenuActive","$item","rawHash","substr","history","pushState","$mapPattern","$patterns","patternMin","patternMax","currentPattern","timer","interval","mobileInterval","animating","atCorner","showPattern","addEventListener","startAnimation","stopAnimation","checkMapPosition","event","detail","map","position","reachedLimits","Math","floor","random","changePattern","playAnimation","currentTime","Date","getTime","delta","startTime","requestAnimationFrame","cancelAnimationFrame","panZoneSize","panSpeed","panDelay","panning","mouse","mapPosition","pointerInHeader","geolocation","setPanZones","handleMouseMove","body","stopPanning","bindHeaderMouseOver","panZones","up","min","max","down","left","right","clientX","clientY","isInsidePanZone","triggerPanning","clearTimeout","delayTimeout","stopPanEvent","mouseOnHeader","posX","posY","setTimeout","startPanEvent","pan","CustomEvent","dispatchEvent","angle","angleFromCenter","translation","distanceFromCenter","getElemPosition","newX","cos","newY","sin","WP","clientGeolocation","latitude","longitude","Number","translatedLongitude","translatedLatitude","console","log","style","transform","toString","triggerMoveEvent","movemapEvent","xs","pow","ys","distance","sqrt","dy","dx","theta","atan2","elem","transformMatrix","getComputedStyle","split","item","parseInt","headerChilds","querySelectorAll","i","length","child","mouseEntersHeader","mouseLeavesHeader","$textContent","$mapContent","isPanning","isHoveringText","handleMapPanning","handleTextHover","hover","minimapScale","indicatorPosition","minimapIndicator","bindClick","bindMapMove","handleClick","moveIndicator","col","attr","row","$map","minimapX","minimapY","secondsDecimalsSize","coordinatesHolder","updateCoordinates","coordinates","convertToCoordinates","innerHTML","lat","lon","windowWidth","windowHeight","convertToDMS","convertedCoordinates","deg","d","m","s","toFixed","handleOrientation","gamma","beta"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr, WP */\n\nSite = {\n  mobileThreshold: 1024,\n  scrollSpeed: 300,\n  init: function() {\n    var _this = this;\n\n    _this.mapElement = document.getElementById('map');\n\n    _this.$window = $(window);\n\n    // Set windowSize\n    _this.getWindowSize();\n\n    _this.setIsMobileWidth();\n\n    Site.Router.init();\n\n    _this.$window.resize(function(){\n      _this.onResize();\n      Site.Nav.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Shapes.init();\n      Site.Minimap.init();\n      Site.Coordinates.init();\n      Site.Map.init();\n      Site.Fades.init();\n      Site.Nav.init();\n      Site.Orientation.init();\n    });\n\n  },\n\n  getWindowSize: function() {\n    var _this =  this;\n\n    // Save window size\n    _this.window = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n\n    // Save window center\n    _this.window.center = {\n      x: _this.window.width / 2,\n      y: _this.window.height / 2,\n    };\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    // Set windowSize\n    _this.getWindowSize();\n\n    _this.setIsMobileWidth();\n\n    Site.Map.onResize();\n  },\n\n  setIsMobileWidth: function() {\n    var _this = this;\n\n    if (_this.window.width >= _this.mobileThreshold) {\n      _this.isMobileWidth = false;\n    } else {\n      _this.isMobileWidth = true;\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Nav = {\n  init: function() {\n    var _this = this;\n\n    _this.$header = $('#header');\n\n    _this.setScrollOffset();\n\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('#header-name').on('click', function() {\n      if (Site.isMobileWidth) {\n        $('#main-content').toggleClass('mobile-menu-active');\n      } else {\n        _this.reset();\n      }\n    });\n\n    $('.mobile-menu-item').on('click', function() {\n      var target = $(this).data('slug');\n      var $target = $('.page-content[data-slug=' + target + ']');\n\n      $('#main-content').removeClass('mobile-menu-active');\n\n      $('body').stop().animate({scrollTop: ($target.offset().top - _this.scrollOffset)}, Site.scrollSpeed, 'swing');\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.setScrollOffset();\n  },\n\n  setScrollOffset: function() {\n    var _this = this;\n\n    _this.scrollOffset = ((_this.$header.outerHeight() - _this.$header.height()) / 2) + _this.$header.height();\n  },\n\n  reset: function() {\n    Site.Map.moveMap(Site.window.width * -1, Site.window.height * -1);\n    Site.Router.resetContent();\n    Site.Router.cleanUrl();\n  },\n};\n\nSite.Router = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n\n    if (location.hash) {\n      _this.loadRoute(_this.parseHash(location.hash));\n    }\n  },\n\n  bind: function() {\n    var _this = this;\n\n    Site.$window.on('hashchange', function() {\n      _this.loadRoute(_this.parseHash(location.hash));\n    });\n\n  },\n\n  loadRoute: function(hash) {\n    var _this = this;\n\n    if (hash) {\n      _this.resetContent();\n      $('.page-content[data-slug=\"' + hash + '\"]').addClass('page-content-active');\n\n      _this.setMenuActive(hash);\n    }\n  },\n\n  resetContent: function() {\n    $('.page-content').removeClass('page-content-active');\n    $('.header-menu-active').removeClass('header-menu-active');\n  },\n\n  setMenuActive: function(hash) {\n    var _this = this;\n\n    var $item = $('.header-menu-item[data-slug=\"' + hash + '\"]');\n\n    $('.header-menu-active').removeClass('header-menu-active');\n    $item.addClass('header-menu-active');\n  },\n\n  parseHash: function(rawHash) {\n    return rawHash.substr(3);\n  },\n\n  cleanUrl: function() {\n    window.location.hash = '';\n    history.pushState({}, '', './');\n  },\n};\n\nSite.Shapes = {\n  $mapPattern: $('.map-pattern'),\n  $patterns: [\n    $('#pattern-1'),\n    $('#pattern-2'),\n    $('#pattern-3'),\n    $('#pattern-4'),\n    $('#pattern-5'),\n  ],\n  patternMin: 0,\n  patternMax: 4,\n  currentPattern: 0,\n  timer: null,\n  interval: 500,\n  mobileInterval: 3000,\n  animating: false,\n  atCorner: false, // is the map at a corner?\n\n  init: function() {\n    var _this = this;\n\n    // If we are on mobile, we slow down the animation interval\n    if (Site.isMobileWidth) {\n      _this.interval = _this.mobileInterval;\n    }\n\n    _this.showPattern();\n\n    Site.mapElement.addEventListener('startpan', _this.startAnimation.bind(_this));\n\n    Site.mapElement.addEventListener('stoppan', _this.stopAnimation.bind(_this));\n\n    Site.mapElement.addEventListener('movemap', _this.checkMapPosition.bind(_this));\n\n  },\n\n  // Check if the map position is at a corner\n  checkMapPosition: function(event) {\n    var _this = this;\n\n    var x = event.detail.map.position.x;\n    var y = event.detail.map.position.y;\n\n    var reachedLimits = 0;\n\n    // Check for left limit\n    if (x >= 0) {\n      reachedLimits++;\n    }\n\n    // Check for right limit\n    if (x <= Site.window.width * -2) {\n      reachedLimits++;\n    }\n\n    // Check for upper limit\n    if (y >= 0) {\n      reachedLimits++;\n    }\n\n    // Check for bottom limit\n    if (y <= Site.window.height * -2) {\n      reachedLimits++;\n    }\n\n    // Reaching 2 limits means we are at a corner\n    if (reachedLimits >= 2) {\n      _this.atCorner = true;\n    } else {\n      _this.atCorner = false;\n    }\n\n  },\n\n  showPattern: function() {\n    var _this = this;\n\n    // Assign random current pattern array index\n    _this.currentPattern = Math.floor(Math.random() * (_this.patternMax - _this.patternMin + 1)) + _this.patternMin;\n\n    // Show current pattern\n    _this.$patterns[_this.currentPattern].addClass('show');\n  },\n\n  changePattern: function() {\n    var _this = this;\n\n    // Hide current pattern\n    _this.$mapPattern.removeClass('show');\n\n    // Assign next current pattern\n    if (_this.currentPattern >= _this.patternMax) {\n      // If last pattern, start from min index\n      _this.currentPattern = _this.patternMin;\n    } else {\n      // Else, assign next index\n      _this.currentPattern++;\n    }\n\n    // Show new current pattern\n    _this.$patterns[_this.currentPattern].addClass('show');\n  },\n\n  playAnimation: function() {\n    var _this = this;\n\n    // Check is animating has been stopped or is at limit; we do this here to fail faster\n    if (!_this.animating) {\n      return false;\n    }\n\n    var currentTime = new Date().getTime();\n    var delta = currentTime - _this.startTime;\n\n    // If interval has passed since start time and we are not in a corner\n    if (delta >= _this.interval  && !_this.atCorner) {\n\n      // Change the background pattern\n      _this.changePattern();\n\n      // Reset start time\n      _this.startTime = new Date().getTime();\n    }\n\n    // Play loop recursively\n    _this.timer = window.requestAnimationFrame(_this.playAnimation.bind(_this));\n  },\n\n  startAnimation: function(event) {\n    var _this = this;\n\n    // Set initial start time\n    _this.startTime = new Date().getTime() - _this.interval;\n\n    _this.animating = true;\n\n    // Initialize animation loop\n    _this.playAnimation();\n  },\n\n  stopAnimation: function() {\n    var _this = this;\n\n    _this.animating = false;\n\n    _this.atCorner = false;\n\n    // Clear animation request\n    window.cancelAnimationFrame(_this.timer);\n  },\n};\n\nSite.Map = {\n  panZoneSize: 48, // in pixels\n  panSpeed: 0.04,\n  panDelay: 100, // in ms\n  panning: false, // is it panning or not?\n  window: {},\n  center: {},\n  mouse: {},\n  mapPosition: false,\n  pointerInHeader: false,\n  init: function() {\n    var _this =  this;\n\n    // Move map to match geolocation\n    _this.geolocation();\n\n    // init pan zones\n    _this.setPanZones();\n\n    // Bind mouse position\n    document.addEventListener('mousemove', _this.handleMouseMove.bind(_this));\n\n    // Detect mouse outside window\n    document.body.addEventListener('mouseleave', _this.stopPanning.bind(_this));\n\n    // Bind hover event on #header\n    _this.bindHeaderMouseOver();\n\n  },\n\n  onResize: function() {\n    var _this =  this;\n\n    // re init pan zones\n    _this.setPanZones();\n  },\n\n\n  // Set Up, Left, Down and Right pan zones based on window size\n  setPanZones: function() {\n    var _this =  this;\n\n    _this.panZones = {\n      up: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      down: {\n        min: Site.window.height - _this.panZoneSize,\n        max: Site.window.height,\n      },\n      left: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      right: {\n        min: Site.window.width - _this.panZoneSize,\n        max: Site.window.width,\n      },\n    };\n\n  },\n\n  handleMouseMove: function(event) {\n    var _this =  this;\n\n    // Save mouse position\n    _this.mouse.x = event.clientX;\n    _this.mouse.y = event.clientY;\n\n\n    if (_this.isInsidePanZone() && !_this.panning) {\n      _this.triggerPanning(); // Trigger animation\n    } else if (_this.panning && !_this.isInsidePanZone()) {\n      _this.stopPanning(); // Stop animation\n    }\n\n  },\n\n  stopPanning: function() {\n    var _this =  this;\n\n    _this.panning = false;\n\n    clearTimeout(_this.delayTimeout);\n\n    _this.stopPanEvent();\n\n  },\n\n  // (Bool) check if mouse is inside any pan zone\n  isInsidePanZone: function() {\n    var _this =  this;\n\n    // Check if mouse is over header or it's childs\n    if (_this.mouseOnHeader) {\n      return false;\n    }\n\n    // Get mouse position\n    var posX = _this.mouse.x;\n    var posY = _this.mouse.y;\n\n    // Check if mouse is inside panZones\n    if ( (posX >= _this.panZones.left.min && posX <= _this.panZones.left.max) || // Left\n      (posX >= _this.panZones.right.min && posX <= _this.panZones.right.max) || // Right\n      (posY >= _this.panZones.up.min && posY <= _this.panZones.up.max) || // Up\n      (posY >= _this.panZones.down.min && posY <= _this.panZones.down.max) ) //  Down\n    {\n      return true;\n    }\n\n    return false;\n\n  },\n\n  // Trigger panning animation\n  triggerPanning: function() {\n    var _this =  this;\n\n    _this.panning = true;\n\n    // We use a timeout to delay the triggering\n    _this.delayTimeout = setTimeout( function() {\n      _this.startPanEvent();\n      window.requestAnimationFrame(_this.pan.bind(_this));\n\n    }, _this.panDelay);\n\n  },\n\n  startPanEvent: function() {\n    var _this =  this;\n\n    var startPanEvent = new CustomEvent('startpan', {\n      detail: {\n        map: {\n          position: {\n            x: _this.mapPosition[4],\n            y: _this.mapPosition[5],\n          },\n        },\n      },\n    });\n\n    Site.mapElement.dispatchEvent(startPanEvent);\n\n  },\n\n  stopPanEvent: function() {\n    var _this =  this;\n\n    var stopPanEvent = new CustomEvent('stoppan', {\n      detail: {\n        map: {\n          position: {\n            x: _this.mapPosition[4],\n            y: _this.mapPosition[5],\n          },\n        },\n      },\n    });\n\n    Site.mapElement.dispatchEvent(stopPanEvent);\n\n  },\n\n  // Main panning logic\n  pan: function() {\n    var _this =  this;\n\n    // Check is panning has been stopped; we do this here to fail faster\n    if (!_this.panning) {\n      return false;\n    }\n\n    // Get the angle between center and mouse position\n    var angle = _this.angleFromCenter();\n\n    // Get the translation value based on mouse position from the center and speed\n    var translation = _this.distanceFromCenter() * _this.panSpeed;\n\n    // If we don't know the map's current postion we get it\n    if (!_this.mapPosition) {\n      _this.mapPosition = _this.getElemPosition(Site.mapElement);\n    }\n\n    // Get new coordinates based on the angle and the translation value\n    var newX = _this.mapPosition[4] + (translation * Math.cos(angle));\n    var newY = _this.mapPosition[5] + (translation * Math.sin(angle));\n\n    // Move the map\n    _this.moveMap(newX,newY);\n\n    // Animate recursevly\n    window.requestAnimationFrame(_this.pan.bind(_this));\n\n  },\n\n  // Check if golocation is available and move the map to that equivalent location\n  geolocation: function() {\n    var _this =  this;\n\n    if (!WP.clientGeolocation) {\n      console.log('Geolocation not returned by the server');\n    } else if (WP.clientGeolocation.latitude && WP.clientGeolocation.longitude) {\n\n      // NOTES:\n      //\n      // # LONGITUDE\n      //\n      // Goes -180 to 180 deg. 0 is Greenwich. Negative is to the east,\n      // positive is west. In the map context it goes from 0 to\n      // _this.window.width * -2.\n      // Equivalent to the X axis\n      //\n      // # LATITUDE\n      //\n      // Goes from -90 to 90 deg. 0 deg is the equator, +- 90 deg are the\n      // poles. In the map context it goes from  0 to _this.window.height * -2\n      // Equivalent to the Y axis\n      //\n\n      // Turn strings into numbers\n      var longitude = Number(WP.clientGeolocation.longitude);\n      var latitude = Number(WP.clientGeolocation.latitude);\n\n      // Transport longitude to only positive values so it goes from 0 to 360\n      var translatedLongitude = longitude + 180;\n\n      // Transport latitude to only negative values so it goes from -180 to 0\n      var translatedLatitude = latitude - 90;\n\n      // Magic math, jk. It's basic math.\n      var newX = (translatedLongitude * (Site.window.width * -2)) / 360;\n      var newY = (translatedLatitude * (Site.window.height * 2)) / 180;\n\n      // Move the map\n      _this.moveMap(newX,newY);\n    }\n  },\n\n\n  // Move the map to given coordinates\n  moveMap: function(x,y) {\n    var _this =  this;\n\n    // Check for left limit\n    if (x >= 0) {\n      x = 0;\n    }\n\n    // Check for right limit\n    if (x <= Site.window.width * -2) {\n      x = Site.window.width * -2;\n    }\n\n    // Check for upper limit\n    if (y >= 0) {\n      y = 0;\n    }\n\n    // Check for bottom limit\n    if (y <= Site.window.height * -2) {\n      y = Site.window.height * -2;\n    }\n\n    // If we don't know the map's current postion we get it\n    if (!_this.mapPosition) {\n      _this.mapPosition = _this.getElemPosition(Site.mapElement);\n    }\n\n    // Set new coordinates\n    _this.mapPosition[4] = x;\n    _this.mapPosition[5] = y;\n\n    // Apply new coordinates\n    Site.mapElement.style.transform = 'matrix(' + _this.mapPosition.toString() + ')';\n\n    _this.triggerMoveEvent(x,y);\n\n  },\n\n  triggerMoveEvent: function(x,y) {\n    var _this =  this;\n\n    // Create custom event\n    var movemapEvent = new CustomEvent('movemap', {\n      detail: {\n        map: {\n          position: {\n            x: x,\n            y: y\n          },\n        },\n      },\n    });\n\n    // Dispatch movemapEvent\n    Site.mapElement.dispatchEvent(movemapEvent);\n  },\n\n  // Return distance between center and mouse positon in pixels\n  distanceFromCenter: function() {\n    var _this = this;\n\n    var xs = Math.pow(Site.window.center.x - _this.mouse.x, 2);\n    var ys = Math.pow(Site.window.center.y - _this.mouse.y, 2);\n    var distance = Math.sqrt(xs + ys);\n\n    return distance;\n  },\n\n  // Return angle in rad from center of the window and mouse position relative to X-axis\n  angleFromCenter: function() {\n    var _this = this;\n\n    var dy = Site.window.center.y - this.mouse.y;\n    var dx = Site.window.center.x - this.mouse.x;\n\n    var theta = Math.atan2(dy, dx); // range (-PI, PI]\n\n    return theta;\n  },\n\n  // Return current map postion\n  getElemPosition: function(elem) {\n    var _this = this;\n\n    // Get current element position (transform values)\n    var transformMatrix = getComputedStyle(elem).transform; // Returns a string like \"matrix(0,0,0,0,0,0)\"\n\n    // If no transform styles applied yet, return the default array values\n    if (transform = 'none') {\n      return [1,0,0,1,0,0];\n    }\n\n    // Get only the values as an array\n    transformMatrix = transformMatrix.replace(/3d|matrix|\\(|\\)|\\s|/g,'').split(','); // Returns an array like [\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"]\n\n    // Parse string values into int values\n    transformMatrix = transformMatrix.map( function(item) {\n      return parseInt(item, 10);\n    }); // Returns an array like [0,0,0,0,0,0]\n\n    return transformMatrix;\n  },\n\n  bindHeaderMouseOver: function() {\n    var _this =  this;\n\n    // Detect mouse inside #header\n    var headerChilds = document.querySelectorAll('#header > *');\n\n    for (var i = 0; i < headerChilds.length; i++) {\n      var child = headerChilds[i];\n\n      child.addEventListener('mouseenter', _this.mouseEntersHeader.bind(_this));\n      child.addEventListener('mouseleave', _this.mouseLeavesHeader.bind(_this));\n    }\n\n  },\n\n  mouseEntersHeader: function() {\n    var _this = this;\n\n    _this.mouseOnHeader = true;\n  },\n\n  mouseLeavesHeader: function() {\n    var _this = this;\n\n    _this.mouseOnHeader = false;\n  },\n\n};\n\nSite.Fades = {\n  $textContent: $('#header-name, #header-menu li, #main-content'),\n  $mapContent: $('.map-block-content'),\n  isPanning: false,\n  isHoveringText: false,\n  init: function() {\n    var _this = this;\n\n    // Fades are not used on mobile\n    if (!Site.isMobileWidth) {\n      _this.handleMapPanning();\n      _this.handleTextHover();\n    }\n\n  },\n\n  handleMapPanning: function() {\n    var _this = this;\n\n    Site.mapElement.addEventListener('startpan', function() {\n      _this.isPanning = true;\n\n      // Fadeout text content\n      _this.$textContent.addClass('fade-element');\n\n      // Fadein map content\n      _this.$mapContent.removeClass('fade-element');\n    });\n\n    Site.mapElement.addEventListener('stoppan', function() {\n      _this.isPanning = false;\n\n      // Fadein text content\n      _this.$textContent.removeClass('fade-element');\n\n      if (_this.isHoveringText) {\n        // If hovering text: fadeout map content\n        _this.$mapContent.addClass('fade-element');\n      }\n    });\n  },\n\n  handleTextHover: function() {\n    var _this = this;\n\n    _this.$textContent.hover(\n      function() {\n        _this.isHoveringText = true;\n\n        if (!_this.isPanning) {\n          // Mouseenter text content\n          // If not panning map: fadeout map content\n          _this.$mapContent.addClass('fade-element');\n        }\n      },\n      function() {\n        _this.isHoveringText = false;\n\n        // Mouseleave text content\n        // Fadein map content\n        _this.$mapContent.removeClass('fade-element');\n      }\n    );\n  },\n};\n\n\nSite.Minimap = {\n  minimapScale: 0.03,\n  indicatorPosition: false,\n  init: function() {\n    var _this = this;\n\n    // Set indicator element\n    _this.minimapIndicator = document.getElementById('minimap-indicator');\n\n    _this.bindClick();\n    _this.bindMapMove();\n  },\n\n  bindClick: function() {\n    var _this = this;\n\n    // Bind click on minimap buttons\n    $('.minimap-button').on('click', function() {\n      // HANDLE IT\n      _this.handleClick(this);\n    });\n  },\n\n  bindMapMove: function() {\n    var _this = this;\n\n    Site.mapElement.addEventListener('movemap', _this.moveIndicator.bind(_this));\n\n  },\n\n  handleClick: function(elem) {\n    var _this = this;\n\n    // Get grid position from target elem data attrs\n    var col = $(elem).attr('data-col');\n    var row = $(elem).attr('data-row');\n\n    // Multiply positions by window sizes to get new map coordinates\n    var x = col * Site.window.width * -1;\n    var y = row * Site.window.height * -1;\n\n    var $map = $('#map');\n\n    // Add slow pan class\n    $map.addClass('slow-pan');\n\n    // Set timeout to remove slow-pan class\n    setTimeout( function() {\n      $map.removeClass('slow-pan');\n    }, 300);\n\n\n    // Move map to new coordinates\n    Site.Map.moveMap(x,y);\n\n  },\n\n  moveIndicator: function(event) {\n    var _this = this;\n\n    var x = event.detail.map.position.x;\n    var y = event.detail.map.position.y;\n\n    // Multiply map position by minimap scale.\n    // Map moves to negative coordinates,\n    // Minimap indicator moves positive\n    var minimapX = x * -(_this.minimapScale);\n    var minimapY = y * -(_this.minimapScale);\n\n    // If we don't know the indicator's current postion we get it\n    if (!_this.indicatorPosition) {\n      _this.indicatorPosition = Site.Map.getElemPosition(_this.minimapIndicator);\n    }\n\n    // Set new coordinates\n    _this.indicatorPosition[4] = minimapX;\n    _this.indicatorPosition[5] = minimapY;\n\n    // Apply new coordinates\n    _this.minimapIndicator.style.transform = 'matrix(' + _this.indicatorPosition.toString() + ')';\n  },\n\n};\n\nSite.Coordinates = {\n  secondsDecimalsSize: 3, // round seconds to this decimals\n  init: function() {\n    var _this = this;\n\n    // Get coordinates element\n    _this.coordinatesHolder = document.getElementById('lat-long');\n\n    // Bind to mapmob\n    _this.bindMapMove();\n  },\n\n  bindMapMove: function() {\n    var _this = this;\n\n    Site.mapElement.addEventListener('movemap', _this.updateCoordinates.bind(_this));\n  },\n\n  updateCoordinates: function(event) {\n    var _this = this;\n\n    // Get map position\n    var x = event.detail.map.position.x;\n    var y = event.detail.map.position.y;\n\n    // Convert position to lat, lon\n    var coordinates = _this.convertToCoordinates(x,y);\n\n    // Update coordintaes in the markup\n    _this.coordinatesHolder.innerHTML = coordinates.lat + \", \" + coordinates.lon;\n\n  },\n\n  convertToCoordinates: function(x,y) {\n    var _this = this;\n\n    // Get window size\n    var windowWidth = Site.window.width;\n    var windowHeight = Site.window.height;\n\n    // Transport values to scales of (-180 - 180) for longitude and of (-90 - 90) for latitude\n    var lon = ((x / (windowWidth * -2)) * 360) - 180;\n    var lat = ((y / (windowHeight * -2)) * 180 ) - 90;\n\n    // Convert values to DMS\n    lon = _this.convertToDMS(lon);\n    lat = _this.convertToDMS(lat);\n\n    // Make the coordinates object\n    var convertedCoordinates = {\n      lat: lat,\n      lon: lon,\n    };\n\n    return convertedCoordinates;\n\n  },\n\n  // (Object) Convert given degrees to DMS (degrees, minutes, seconds)\n  // Reference: http://www.rapidtables.com/convert/number/degrees-to-degrees-minutes-seconds.htm\n  convertToDMS: function(deg) {\n    var _this = this;\n\n    // Get Degrees\n    var d = Math.floor(deg);\n\n    // Get Minutes\n    var m = Math.floor((deg - d) * 60);\n\n    // Get Seconds\n    var s = (deg - d - m / 60) * 3600;\n\n    // Round Seconds\n    s = s.toFixed(_this.secondsDecimalsSize);\n\n    return (d + '° ' + m + '\\' ' + s + '\"');\n  }\n\n};\n\n// Handles Panning thru device orientation\nSite.Orientation = {\n  init: function() {\n    var _this = this;\n\n    // We only get this working if we are on mobile\n    if (Site.isMobileWidth) {\n\n      // Bind handle orintation function scope; a la react\n      _this.handleOrientation = _this.handleOrientation.bind(_this);\n\n      // Bind events\n      _this.bind();\n\n      // We need to trigger this event in order to get the patterns changing\n      Site.Map.startPanEvent();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // Listen for deviceorientation\n    window.addEventListener(\"deviceorientation\", _this.handleOrientation, true);\n\n  },\n\n  // Moves map with orientation change\n  handleOrientation: function(event) {\n\n    // Get orientation values from the event\n    var x = event.gamma; // In degree in the range [-90,90]\n    var y = event.beta;  // In degree in the range [-180,180]\n\n    // Magic math, jk. It's basic math.\n    var newX = (x + 90) * (Site.window.width * -2) / 180;\n    var newY = (y + 180) * (Site.window.height * -2) / 360;\n\n    // Move the map\n    Site.Map.moveMap(newX,newY);\n\n  },\n};\n\nSite.init();\n"]}