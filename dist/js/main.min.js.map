{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","Map","fixWidows","each","string","html","replace","panZoneSize","panning","pan","up","down","left","right","width","height","mapPosition","getWindowSize","map","getElementById","setPanZones","addEventListener","handleMouseMove","bind","innerWidth","innerHeight","windowWidth","windowHeight","panZones","min","max","event","posX","clientX","posY","clientY","noPan","triggerAnimation","requestAnimationFrame","animate","newPosition","getMapPosition","style","transform","toString","console","log","transformMatrix","getComputedStyle","split","item","parseInt"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Map.init();\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Map = {\n  panZoneSize: 50, // in pixels\n  panning: false,\n  pan: {\n    up: false,\n    down: false,\n    left: false,\n    right: false,\n  },\n  window: {\n    width: 0,\n    height: 0,\n  },\n  mapPosition: false,\n\n  init: function() {\n    var _this =  this;\n\n    // Set windowSize\n    _this.getWindowSize();\n\n    // Set map element\n    _this.map = document.getElementById('map');\n\n    // init pan zones\n    _this.setPanZones();\n\n    // bind mouse position\n    document.addEventListener('mousemove', _this.handleMouseMove.bind(_this));\n\n  },\n\n  getWindowSize: function() {\n    var _this =  this;\n\n    _this.window.width = window.innerWidth;\n    _this.window.height = window.innerHeight;\n  },\n\n  setPanZones: function() {\n    var _this =  this;\n\n    // Get window dimensions\n    var windowWidth = window.innerWidth;\n    var windowHeight = window.innerHeight;\n\n    // Set\n    _this.panZones = {\n      up: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      down: {\n        min: windowHeight - _this.panZoneSize,\n        max: windowHeight,\n      },\n      left: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      right: {\n        min: windowWidth - _this.panZoneSize,\n        max: windowWidth,\n      },\n    };\n\n  },\n\n  handleMouseMove: function(event) {\n    var _this =  this;\n\n    var posX = event.clientX;\n    var posY = event.clientY;\n\n    _this.noPan();\n\n    if (posY > _this.panZones.up.max && posY < _this.panZones.down.min && posX > _this.panZones.left.max && posX < _this.panZones.right.min) { // not in a zone\n      _this.panning = false;\n    } else {\n      _this.panning = true;\n\n      // Check inside which zones\n      if (posY >= _this.panZones.up.min && posY <= _this.panZones.up.max) { //up\n        _this.pan.up = true;\n      }\n\n      if (posY >= _this.panZones.down.min && posY <= _this.panZones.down.max) { //down\n        _this.pan.down = true;\n      }\n\n      if (posX >= _this.panZones.left.min && posX <= _this.panZones.left.max) { //left\n        _this.pan.left = true;\n      }\n\n      if (posX >= _this.panZones.right.min && posX <= _this.panZones.right.max) { //right\n        _this.pan.right = true;\n      }\n\n      _this.triggerAnimation();\n    }\n\n  },\n\n  noPan: function() {\n    var _this =  this;\n\n    _this.pan =  {\n      up: false,\n      down: false,\n      left: false,\n      right: false,\n    };\n\n  },\n\n  triggerAnimation: function() {\n    var _this =  this;\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n  },\n\n  animate: function() {\n    var _this =  this;\n\n    if (!_this.panning) {\n      return true;\n    }\n\n    var newPosition = [1,0,0,1,0,0];\n\n    // Get current map position\n    if (!_this.mapPosition) {\n      _this.mapPosition = _this.getMapPosition();\n    }\n\n    // Move up\n    if (_this.pan.up) {\n      newPosition[5] = _this.mapPosition[5] + 1;\n    }\n\n    // Move down\n    if (_this.pan.down) {\n      newPosition[5] = _this.mapPosition[5] - 1;\n    }\n\n    // Move left\n    if (_this.pan.left) {\n      newPosition[4] = _this.mapPosition[4] + 1;\n    }\n\n    // Move right\n    if (_this.pan.right && _this.mapPosition[4]) {\n      newPosition[4] = _this.mapPosition[4] - 1;\n    }\n\n    _this.map.style.transform = _this.mapPosition = 'matrix(' + newPosition.toString() + ')';\n    console.log(_this.mapPosition);\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n\n  },\n\n  getMapPosition: function() {\n    var _this =  this;\n\n    // Get current element position (transform values)\n    var transformMatrix = getComputedStyle(this.map)['transform']; // Returns a string like \"matrix(0,0,0,0,0,0)\"\n\n    // Get only the values\n    transformMatrix = transformMatrix.replace('matrix(','').replace(')', ''); // Returns a string like \"0,0,0,0,0,0\"\n\n    // Make it into an array\n    return transformMatrix = transformMatrix.split(', ').map( function(item) {\n          return parseInt(item, 10);\n    });; // Returns an array like [0,0,0,0,0,0]\n\n  },\n};\n\nSite.init();\n"]}