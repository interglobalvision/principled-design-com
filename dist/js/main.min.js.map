{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","Menu","$","window","resize","onResize","document","ready","Shapes","Map","fixWidows","each","string","html","replace","$headerItems","bind","on","e","onItemClick","item","event","removeClass","addClass","currentState","maxState","timer","interval","setState","startInterval","setInterval","nextState","panZoneSize","panning","pan","up","down","left","right","width","height","mapPosition","getWindowSize","map","getElementById","setPanZones","addEventListener","handleMouseMove","noPan","innerWidth","innerHeight","windowWidth","windowHeight","panZones","min","max","posX","clientX","posY","clientY","triggerAnimation","console","log","requestAnimationFrame","animate","getMapPosition","style","transform","toString","transformMatrix","getComputedStyle","split","parseInt"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    Site.Menu.init();\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Shapes.init();\n      Site.Map.init();\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Menu = {\n  $headerItems: $('.header-menu-item'),\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$headerItems.on('click', function(e) {\n      _this.onItemClick(this, e);\n    });\n  },\n\n  onItemClick: function(item, event) {\n    var _this = this;\n\n    $('.header-menu-active').removeClass('header-menu-active');\n    $(item).addClass('header-menu-active');\n  }\n};\n\nSite.Shapes = {\n  currentState: 0,\n  maxState: 7,\n  timer: null,\n  interval: 12000,\n  init: function() {\n    var _this = this;\n\n    _this.setState();\n    _this.startInterval();\n  },\n\n  startInterval: function() {\n    var _this = this;\n\n    _this.timer = setInterval(function() {_this.setState();}, _this.interval);\n  },\n\n  nextState: function() {\n    var _this = this;\n\n    _this.currentState++;\n\n    if (_this.currentState > _this.maxState) {\n      _this.currentState = 1;\n    }\n\n    return _this.currentState;\n  },\n\n  setState: function() {\n    var _this = this;\n\n    $('#background-shape')\n    .removeClass('shape-state-' + _this.currentState)\n    .addClass('shape-state-' + _this.nextState());\n  },\n};\n\nSite.Map = {\n  panZoneSize: 100, // in pixels\n  panning: false,\n  pan: {\n    up: false,\n    down: false,\n    left: false,\n    right: false,\n  },\n  window: {\n    width: 0,\n    height: 0,\n  },\n  mapPosition: false,\n\n  init: function() {\n    var _this =  this;\n\n    // Set windowSize\n    _this.getWindowSize();\n\n    // Set map element\n    _this.map = document.getElementById('map');\n\n    // init pan zones\n    _this.setPanZones();\n\n    // bind mouse position\n    document.addEventListener('mousemove', _this.handleMouseMove.bind(_this));\n\n    // detect mouse outside window\n    window.addEventListener('onmouseleave', _this.noPan.bind(_this));\n  },\n\n  getWindowSize: function() {\n    var _this =  this;\n\n    _this.window.width = window.innerWidth;\n    _this.window.height = window.innerHeight;\n  },\n\n  setPanZones: function() {\n    var _this =  this;\n\n    // Get window dimensions\n    var windowWidth = window.innerWidth;\n    var windowHeight = window.innerHeight;\n\n    // Set\n    _this.panZones = {\n      up: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      down: {\n        min: windowHeight - _this.panZoneSize,\n        max: windowHeight,\n      },\n      left: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      right: {\n        min: windowWidth - _this.panZoneSize,\n        max: windowWidth,\n      },\n    };\n\n  },\n\n  handleMouseMove: function(event) {\n    var _this =  this;\n\n    var posX = event.clientX;\n    var posY = event.clientY;\n\n    _this.noPan();\n\n    if (posY > _this.panZones.up.max && posY < _this.panZones.down.min && posX > _this.panZones.left.max && posX < _this.panZones.right.min) { // not in a zone\n      _this.panning = false;\n    } else {\n      _this.panning = true;\n\n      // Check inside which zones\n      if (posY >= _this.panZones.up.min && posY <= _this.panZones.up.max) { //up\n        _this.pan.up = true;\n      }\n\n      if (posY >= _this.panZones.down.min && posY <= _this.panZones.down.max) { //down\n        _this.pan.down = true;\n      }\n\n      if (posX >= _this.panZones.left.min && posX <= _this.panZones.left.max) { //left\n        _this.pan.left = true;\n      }\n\n      if (posX >= _this.panZones.right.min && posX <= _this.panZones.right.max) { //right\n        _this.pan.right = true;\n      }\n\n      _this.triggerAnimation();\n    }\n\n  },\n\n  noPan: function() {\n    var _this =  this;\n\n    console.log('no pan');\n\n    _this.pan =  {\n      up: false,\n      down: false,\n      left: false,\n      right: false,\n    };\n\n  },\n\n  triggerAnimation: function() {\n    var _this =  this;\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n  },\n\n  animate: function() {\n    var _this =  this;\n\n    if (!_this.panning) {\n      return true;\n    }\n\n    // Get current map position\n    if (!_this.mapPosition) {\n      _this.mapPosition = _this.getMapPosition();\n    }\n\n    // Move up\n    if (_this.pan.up && _this.mapPosition[5] <= 0) {\n      _this.mapPosition[5] = _this.mapPosition[5] + 1;\n    }\n\n    // Move down\n    if (_this.pan.down && _this.mapPosition[5] >= (_this.window.height * -2)) {\n      _this.mapPosition[5] = _this.mapPosition[5] - 1;\n    }\n\n    // Move left\n    if (_this.pan.left && _this.mapPosition[4] <= 0) {\n      _this.mapPosition[4] = _this.mapPosition[4] + 1;\n    }\n\n    // Move right\n    if (_this.pan.right && _this.mapPosition[4] >= (_this.window.width * -2)) {\n      _this.mapPosition[4] = _this.mapPosition[4] - 1;\n    }\n\n    _this.map.style.transform = 'matrix(' + _this.mapPosition.toString() + ')';\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n\n  },\n\n  getMapPosition: function() {\n    var _this =  this;\n\n    // Get current element position (transform values)\n    var transformMatrix = getComputedStyle(this.map)['transform']; // Returns a string like \"matrix(0,0,0,0,0,0)\"\n\n    // Get only the values\n    transformMatrix = transformMatrix.replace('matrix(','').replace(')', ''); // Returns a string like \"0,0,0,0,0,0\"\n\n    // Make it into an array\n    return transformMatrix = transformMatrix.split(', ').map( function(item) {\n          return parseInt(item, 10);\n    });; // Returns an array like [0,0,0,0,0,0]\n  },\n};\n\nSite.init();\n"]}