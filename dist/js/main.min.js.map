{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","Menu","$","window","resize","onResize","document","ready","Shapes","Map","fixWidows","each","string","html","replace","$headerItems","bind","on","e","onItemClick","item","event","href","children","attr","hash","substr","removeClass","addClass","currentState","maxState","timer","interval","setState","startInterval","setInterval","nextState","panZoneSize","panning","pan","up","down","left","right","width","height","mapPosition","getWindowSize","map","getElementById","setPanZones","addEventListener","handleMouseMove","innerWidth","innerHeight","windowWidth","windowHeight","panZones","min","max","posX","clientX","posY","clientY","noPan","triggerAnimation","requestAnimationFrame","animate","getMapPosition","style","transform","toString","transformMatrix","getComputedStyle","split","parseInt"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    Site.Menu.init();\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Shapes.init();\n      Site.Map.init();\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Menu = {\n  $headerItems: $('.header-menu-item'),\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$headerItems.on('click', function(e) {\n      _this.onItemClick(this, e);\n    });\n  },\n\n  onItemClick: function(item, event) {\n    var _this = this;\n    var href = $(item).children('a').attr('href');\n    var hash = href.substr(1);\n\n    $('.header-menu-active').removeClass('header-menu-active');\n    $(item).addClass('header-menu-active');\n\n    $('.page-content').removeClass('page-content-active');\n    $('.page-content[data-slug=\"' + hash + '\"]').addClass('page-content-active');\n  },\n};\n\nSite.Shapes = {\n  currentState: 0,\n  maxState: 7,\n  timer: null,\n  interval: 12000,\n  init: function() {\n    var _this = this;\n\n    _this.setState();\n    _this.startInterval();\n  },\n\n  startInterval: function() {\n    var _this = this;\n\n    _this.timer = setInterval(function() {_this.setState();}, _this.interval);\n  },\n\n  nextState: function() {\n    var _this = this;\n\n    _this.currentState++;\n\n    if (_this.currentState > _this.maxState) {\n      _this.currentState = 1;\n    }\n\n    return _this.currentState;\n  },\n\n  setState: function() {\n    var _this = this;\n\n    $('#background-shape')\n    .removeClass('shape-state-' + _this.currentState)\n    .addClass('shape-state-' + _this.nextState());\n  },\n};\n\nSite.Map = {\n  panZoneSize: 100, // in pixels\n  panning: false,\n  pan: {\n    up: false,\n    down: false,\n    left: false,\n    right: false,\n  },\n  window: {\n    width: 0,\n    height: 0,\n  },\n  mapPosition: false,\n\n  init: function() {\n    var _this =  this;\n\n    // Set windowSize\n    _this.getWindowSize();\n\n    // Set map element\n    _this.map = document.getElementById('map');\n\n    // init pan zones\n    _this.setPanZones();\n\n    // bind mouse position\n    document.addEventListener('mousemove', _this.handleMouseMove.bind(_this));\n\n  },\n\n  getWindowSize: function() {\n    var _this =  this;\n\n    _this.window.width = window.innerWidth;\n    _this.window.height = window.innerHeight;\n  },\n\n  setPanZones: function() {\n    var _this =  this;\n\n    // Get window dimensions\n    var windowWidth = window.innerWidth;\n    var windowHeight = window.innerHeight;\n\n    // Set\n    _this.panZones = {\n      up: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      down: {\n        min: windowHeight - _this.panZoneSize,\n        max: windowHeight,\n      },\n      left: {\n        min: 0,\n        max: _this.panZoneSize,\n      },\n      right: {\n        min: windowWidth - _this.panZoneSize,\n        max: windowWidth,\n      },\n    };\n\n  },\n\n  handleMouseMove: function(event) {\n    var _this =  this;\n\n    var posX = event.clientX;\n    var posY = event.clientY;\n\n    _this.noPan();\n\n    if (posY > _this.panZones.up.max && posY < _this.panZones.down.min && posX > _this.panZones.left.max && posX < _this.panZones.right.min) { // not in a zone\n      _this.panning = false;\n    } else {\n      _this.panning = true;\n\n      // Check inside which zones\n      if (posY >= _this.panZones.up.min && posY <= _this.panZones.up.max) { //up\n        _this.pan.up = true;\n      }\n\n      if (posY >= _this.panZones.down.min && posY <= _this.panZones.down.max) { //down\n        _this.pan.down = true;\n      }\n\n      if (posX >= _this.panZones.left.min && posX <= _this.panZones.left.max) { //left\n        _this.pan.left = true;\n      }\n\n      if (posX >= _this.panZones.right.min && posX <= _this.panZones.right.max) { //right\n        _this.pan.right = true;\n      }\n\n      _this.triggerAnimation();\n    }\n\n  },\n\n  noPan: function() {\n    var _this =  this;\n\n    _this.pan =  {\n      up: false,\n      down: false,\n      left: false,\n      right: false,\n    };\n\n  },\n\n  triggerAnimation: function() {\n    var _this =  this;\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n  },\n\n  animate: function() {\n    var _this =  this;\n\n    if (!_this.panning) {\n      return true;\n    }\n\n    // Get current map position\n    if (!_this.mapPosition) {\n      _this.mapPosition = _this.getMapPosition();\n    }\n\n    // Move up\n    if (_this.pan.up && _this.mapPosition[5] <= 0) {\n      _this.mapPosition[5] = _this.mapPosition[5] + 1;\n    }\n\n    // Move down\n    if (_this.pan.down && _this.mapPosition[5] >= (_this.window.height * -2)) {\n      _this.mapPosition[5] = _this.mapPosition[5] - 1;\n    }\n\n    // Move left\n    if (_this.pan.left && _this.mapPosition[4] <= 0) {\n      _this.mapPosition[4] = _this.mapPosition[4] + 1;\n    }\n\n    // Move right\n    if (_this.pan.right && _this.mapPosition[4] >= (_this.window.width * -2)) {\n      _this.mapPosition[4] = _this.mapPosition[4] - 1;\n    }\n\n    _this.map.style.transform = 'matrix(' + _this.mapPosition.toString() + ')';\n\n    window.requestAnimationFrame(_this.animate.bind(_this));\n\n  },\n\n  getMapPosition: function() {\n    var _this =  this;\n\n    // Get current element position (transform values)\n    var transformMatrix = getComputedStyle(this.map)['transform']; // Returns a string like \"matrix(0,0,0,0,0,0)\"\n\n    // Get only the values\n    transformMatrix = transformMatrix.replace('matrix(','').replace(')', ''); // Returns a string like \"0,0,0,0,0,0\"\n\n    // Make it into an array\n    return transformMatrix = transformMatrix.split(', ').map( function(item) {\n          return parseInt(item, 10);\n    });; // Returns an array like [0,0,0,0,0,0]\n  },\n};\n\nSite.init();\n"]}