Site={mobileThreshold:601,init:function(){var n=this;Site.Router.init(),$(window).resize(function(){n.onResize()}),$(document).ready(function(){Site.Shapes.init(),Site.Map.init(),Site.Minimap.init()})},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var n=$(this).html();n=n.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(n)})}},Site.Router={init:function(){var n=this;n.bind(),location.hash&&n.loadRoute(n.parseHash(location.hash))},bind:function(){var n=this;$(window).on("hashchange",function(){n.loadRoute(n.parseHash(location.hash))})},loadRoute:function(n){var t=this;n&&($(".page-content").removeClass("page-content-active"),$('.page-content[data-slug="'+n+'"]').addClass("page-content-active"),t.setMenuActive(n))},setMenuActive:function(n){var t=$('.header-menu-item[data-slug="'+n+'"]');$(".header-menu-active").removeClass("header-menu-active"),t.addClass("header-menu-active")},parseHash:function(n){return n.substr(3)}},Site.Shapes={$mapPattern:$(".map-pattern"),$patterns:[$("#pattern-1"),$("#pattern-2"),$("#pattern-3"),$("#pattern-4"),$("#pattern-5")],patternMin:0,patternMax:4,currentPattern:0,timer:null,interval:100,animating:!1,init:function(){var n=this;n.showPattern();var t=document.getElementById("map");t.addEventListener("startpan",function(){n.startAnimation()}),t.addEventListener("stoppan",function(){n.stopAnimation()})},showPattern:function(){var n=this,t=parseInt(2*Math.random());1===t?$("#background-pattern-holder").addClass("fill-path"):$("#background-pattern-holder").addClass("stroke-path"),n.currentPattern=Math.floor(Math.random()*(n.patternMax-n.patternMin+1))+n.patternMin,n.$patterns[n.currentPattern].addClass("show")},changePattern:function(){var n=this;return!!n.animating&&(n.$mapPattern.removeClass("show"),n.currentPattern>=n.patternMax?n.currentPattern=n.patternMin:n.currentPattern++,n.$patterns[n.currentPattern].addClass("show"),void window.requestAnimationFrame(n.changePattern.bind(n)))},startAnimation:function(){var n=this;n.animating=!0,window.requestAnimationFrame(n.changePattern.bind(n))},stopAnimation:function(){var n=this;n.animating=!1}},Site.Map={panZoneSize:150,panSpeed:.04,panning:!1,window:{},center:{},mouse:{},mapPosition:!1,pointerInHeader:!1,init:function(){var n=this;n.getWindowSize(),n.map=document.getElementById("map"),n.setPanZones(),document.addEventListener("mousemove",n.handleMouseMove.bind(n)),document.body.addEventListener("mouseleave",n.stopPanning.bind(n)),n.bindHeaderMouseOver()},getWindowSize:function(){var n=this;n.window={width:window.innerWidth,height:window.innerHeight},n.window.center={x:n.window.width/2,y:n.window.height/2}},setPanZones:function(){var n=this;n.panZones={up:{min:0,max:n.panZoneSize},down:{min:n.window.height-n.panZoneSize,max:n.window.height},left:{min:0,max:n.panZoneSize},right:{min:n.window.width-n.panZoneSize,max:n.window.width}}},handleMouseMove:function(n){var t=this;t.mouse.x=n.clientX,t.mouse.y=n.clientY,t.isInsidePanZone()&&!t.panning?t.triggerPanning():t.panning&&!t.isInsidePanZone()&&t.stopPanning()},stopPanning:function(){var n=this;n.panning=!1,n.stopPanEvent()},isInsidePanZone:function(){var n=this;if(n.mouseOnHeader)return!1;var t=n.mouse.x,i=n.mouse.y;return t>=n.panZones.left.min&&t<=n.panZones.left.max||t>=n.panZones.right.min&&t<=n.panZones.right.max||i>=n.panZones.up.min&&i<=n.panZones.up.max||i>=n.panZones.down.min&&i<=n.panZones.down.max},triggerPanning:function(){var n=this;n.panning=!0,n.startPanEvent(),window.requestAnimationFrame(n.pan.bind(n))},startPanEvent:function(){var n=this,t=new CustomEvent("startpan",{detail:{map:{position:{x:n.mapPosition[4],y:n.mapPosition[5]}}}});n.map.dispatchEvent(t)},stopPanEvent:function(){var n=this,t=new CustomEvent("stoppan",{detail:{map:{position:{x:n.mapPosition[4],y:n.mapPosition[5]}}}});n.map.dispatchEvent(t)},pan:function(){var n=this;if(!n.panning)return!1;var t=n.angleFromCenter(),i=n.distanceFromCenter()*n.panSpeed;n.mapPosition||(n.mapPosition=n.getMapPosition(n.map));var e=n.mapPosition[4]+i*Math.cos(t),a=n.mapPosition[5]+i*Math.sin(t);e>=0&&(e=0),e<=n.window.width*-2&&(e=n.window.width*-2),a>=0&&(a=0),a<=n.window.height*-2&&(a=n.window.height*-2),n.moveMap(e,a),window.requestAnimationFrame(n.pan.bind(n))},moveMap:function(n,t){var i=this;i.mapPosition||(i.mapPosition=i.getMapPosition(i.map)),i.mapPosition[4]=n,i.mapPosition[5]=t,i.map.style.transform="matrix("+i.mapPosition.toString()+")",Site.Minimap.moveIndicator(n,t)},distanceFromCenter:function(){var n=this,t=Math.pow(n.window.center.x-n.mouse.x,2),i=Math.pow(n.window.center.y-n.mouse.y,2),e=Math.sqrt(t+i);return e},angleFromCenter:function(){var n=this,t=n.window.center.y-this.mouse.y,i=n.window.center.x-this.mouse.x,e=Math.atan2(t,i);return e},getMapPosition:function(n){var t=getComputedStyle(n).transform;return t=t.replace("matrix(","").replace(")",""),t=t.split(", ").map(function(n){return parseInt(n,10)})},bindHeaderMouseOver:function(){for(var n=this,t=document.querySelectorAll("#header > *"),i=0;i<t.length;i++){var e=t[i];e.addEventListener("mouseenter",n.mouseEntersHeader.bind(n)),e.addEventListener("mouseleave",n.mouseLeavesHeader.bind(n))}},mouseEntersHeader:function(){var n=this;n.mouseOnHeader=!0},mouseLeavesHeader:function(){var n=this;n.mouseOnHeader=!1}},Site.Minimap={minimapScale:.03,indicatorPosition:!1,init:function(){var n=this;n.minimapIndicator=document.getElementById("minimap-indicator"),n.bindClick()},bindClick:function(){var n=this;$(".minimap-button").on("click",function(){n.handleClick(this)})},handleClick:function(n){var t=JSON.parse($(n).attr("data-pos")),i=t.col,e=t.row,a=i*Site.Map.window.width*-1,o=e*Site.Map.window.height*-1;Site.Map.moveMap(a,o)},moveIndicator:function(n,t){var i=this,e=n*-i.minimapScale,a=t*-i.minimapScale;i.indicatorPosition||(i.indicatorPosition=Site.Map.getMapPosition(i.minimapIndicator)),i.indicatorPosition[4]=e,i.indicatorPosition[5]=a,i.minimapIndicator.style.transform="matrix("+i.indicatorPosition.toString()+")"}},Site.init();
//# sourceMappingURL=main.min.js.map
