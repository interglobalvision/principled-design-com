Site={mobileThreshold:601,init:function(){var n=this;Site.Menu.init(),Site.Router.init(),$(window).resize(function(){n.onResize()}),$(document).ready(function(){Site.Shapes.init(),Site.Map.init()})},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var n=$(this).html();n=n.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(n)})}},Site.Menu={$headerItems:$(".header-menu-item"),init:function(){var n=this;n.bind()},bind:function(){var n=this;n.$headerItems.on("click",function(t){n.onItemClick(this,t)})},onItemClick:function(n,t){var e=$(n).children("a").attr("href");e.substr(3);$(".header-menu-active").removeClass("header-menu-active"),$(n).addClass("header-menu-active")}},Site.Router={init:function(){var n=this;n.bind(),location.hash&&n.loadRoute(n.parseHash(location.hash))},bind:function(){var n=this;$(window).on("hashchange",function(){n.loadRoute(n.parseHash(location.hash))})},loadRoute:function(n){n&&($(".page-content").removeClass("page-content-active"),$('.page-content[data-slug="'+n+'"]').addClass("page-content-active"))},parseHash:function(n){return n.substr(3)}},Site.Shapes={currentState:0,maxState:7,timer:null,interval:12e3,init:function(){var n=this;n.setState(),n.startInterval()},startInterval:function(){var n=this;n.timer=setInterval(function(){n.setState()},n.interval)},nextState:function(){var n=this;return n.currentState++,n.currentState>n.maxState&&(n.currentState=1),n.currentState},setState:function(){var n=this;$("#background-shape").removeClass("shape-state-"+n.currentState).addClass("shape-state-"+n.nextState())}},Site.Map={panZoneSize:100,panSpeed:.04,panning:!1,window:{},center:{},mouse:{},mapPosition:!1,init:function(){var n=this;n.getWindowSize(),n.map=document.getElementById("map"),n.setPanZones(),document.addEventListener("mousemove",n.handleMouseMove.bind(n)),document.body.addEventListener("mouseleave",n.stopPanning.bind(n))},getWindowSize:function(){var n=this;n.window={width:window.innerWidth,height:window.innerHeight},n.window.center={x:n.window.width/2,y:n.window.height/2}},setPanZones:function(){var n=this;n.panZones={up:{min:0,max:n.panZoneSize},down:{min:n.window.height-n.panZoneSize,max:n.window.height},left:{min:0,max:n.panZoneSize},right:{min:n.window.width-n.panZoneSize,max:n.window.width}}},handleMouseMove:function(n){var t=this;t.mouse.x=n.clientX,t.mouse.y=n.clientY,t.isInsidePanZone()&&!t.panning?t.triggerPanning():t.panning&&!t.isInsidePanZone()&&t.stopPanning()},stopPanning:function(){var n=this;n.panning=!1,n.stopPanEvent()},isInsidePanZone:function(){var n=this,t=n.mouse.x,e=n.mouse.y;return t>=n.panZones.left.min&&t<=n.panZones.left.max||t>=n.panZones.right.min&&t<=n.panZones.right.max||e>=n.panZones.up.min&&e<=n.panZones.up.max||e>=n.panZones.down.min&&e<=n.panZones.down.max},triggerPanning:function(){var n=this;n.panning=!0,n.startPanEvent(),window.requestAnimationFrame(n.pan.bind(n))},startPanEvent:function(){var n=this,t=new CustomEvent("startpan",{detail:{map:{position:{x:n.mapPosition[4],y:n.mapPosition[5]}}}});n.map.dispatchEvent(t)},stopPanEvent:function(){var n=this,t=new CustomEvent("stoppan",{detail:{map:{position:{x:n.mapPosition[4],y:n.mapPosition[5]}}}});n.map.dispatchEvent(t)},pan:function(){var n=this;if(!n.panning)return!1;var t=n.angleFromCenter(),e=n.distanceFromCenter()*n.panSpeed;n.mapPosition||(n.mapPosition=n.getMapPosition());var i=n.mapPosition[4]+e*Math.cos(t),a=n.mapPosition[5]+e*Math.sin(t);i>=0&&(i=0),i<=n.window.width*-2&&(i=n.window.width*-2),a>=0&&(a=0),a<=n.window.height*-2&&(a=n.window.height*-2),n.moveMap(i,a),window.requestAnimationFrame(n.pan.bind(n))},moveMap:function(n,t){var e=this;e.mapPosition||(e.mapPosition=e.getMapPosition()),e.mapPosition[4]=n,e.mapPosition[5]=t,e.map.style.transform="matrix("+e.mapPosition.toString()+")"},distanceFromCenter:function(){var n=this,t=Math.pow(n.window.center.x-n.mouse.x,2),e=Math.pow(n.window.center.y-n.mouse.y,2),i=Math.sqrt(t+e);return i},angleFromCenter:function(){var n=this,t=n.window.center.y-this.mouse.y,e=n.window.center.x-this.mouse.x,i=Math.atan2(t,e);return i},getMapPosition:function(){var n=getComputedStyle(this.map).transform;return n=n.replace("matrix(","").replace(")",""),n=n.split(", ").map(function(n){return parseInt(n,10)})}},Site.init();
//# sourceMappingURL=main.min.js.map
